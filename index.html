<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse de Scénarios de Trading</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="login-screen">
        <h2>Connexion à l'application</h2>
        <input type="password" id="password-input" placeholder="Entrez le mot de passe">
        <button id="login-button">Se connecter</button>
        <p id="login-message" class="message"></p>
    </div>

    <div id="app-content" style="display:none;">
        <h1>Analyse de Scénarios de Trading</h1>

        <div class="form-section">
            <h2>Conditions Actuelles du Marché</h2>
            <form id="analysis-form">
                <label for="h2Shape">Forme Bougie H2 :</label>
                <select id="h2Shape" name="h2Shape">
                    <option value="">Sélectionnez</option>
                    <option value="pleine-haussiere">Pleine Haussière</option>
                    <option value="pleine-baissiere">Pleine Baissière</option>
                    <option value="algo-valide">Algo Valide</option>
                    <option value="algo-invalide">Algo Invalide</option>
                    <option value="indecise">Indécise</option>
                </select>

                <label for="h2Composition">Composition H2 (concernant les H1) :</label>
                <select id="h2Composition" name="h2Composition">
                    <option value="">Sélectionnez</option>
                    <option value="h1-1-2-algo">Les deux H1 (M30A & M30B) sont Algo</option>
                    <option value="h1-2-algo">Seule la dernière H1 (M30B) est Algo</option>
                    <option value="autre">Autre Composition</option>
                </select>

                <label for="h1Config">Configuration H1 (Avant Heure de Trade) :</label>
                <select id="h1-config" name="h1ConfigBefore">
                    <option value="">Sélectionnez</option>
                    <option value="A">Cas A : H1 = pleine haussière ou baissière</option>
                    <option value="C">Cas C : H1 = pleine haussière ou baissière</option>
                    <option value="D">Cas D : H1 = pleine haussière ou baissière</option>
                    <option value="E">Cas E : H1 = Algo</option>
                </select>

                <p class="h1-desc hidden" id="desc-A">**Cas A :** H1 = pleine haussière ou baissière (M30 A pleine haussière/baissière et M30 B pleine haussière/baissière)</p>
                <p class="h1-desc hidden" id="desc-C">**Cas C :** H1 = pleine haussière ou baissière (M30 A pleine haussière/baissière et M30 B algo)</p>
                <p class="h1-desc hidden" id="desc-D">**Cas D :** H1 = pleine haussière ou baissière (M30 A algo et M30 B algo)</p>
                <p class="h1-desc hidden" id="desc-E">**Cas E :** H1 = Algo (M30 A algo et M30 B algo)</p>

                <label for="rsiStatus">Statut RSI (observé en H1) :</label>
                <select id="rsiStatus" name="rsiStatus">
                    <option value="">Sélectionnez</option>
                    <option value="haussiere">Tendance Haussière</option>
                    <option value="baissiere">Tendance Baissière</option>
                    <option value="surachat">En Surachat</option>
                    <option value="survente">En Survente</option>
                    <option value="neutre">Neutre</option>
                </select>

                <label for="tradeHour">Heure de Trade (optionnel) :</label>
                <select id="tradeHour" name="tradeHour">
                    <option value="">Sélectionnez l'heure</option>
                    <script>
                        for (let i = 0; i < 24; i++) {
                            const hour = i < 10 ? '0' + i : '' + i;
                            document.write(`<option value="${i}">${hour}:00</option>`);
                        }
                    </script>
                </select>

                <button type="button" id="analyze-button">Analyser le Marché</button>
            </form>

            <div id="result-display" class="result-section">
                </div>
        </div>

        <div class="journal-section">
            <h2>Journal de Trading</h2>
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Heure</th>
                        <th>Scénario</th>
                        <th>Résultat</th>
                        <th>Commentaires</th>
                    </tr>
                </thead>
                <tbody id="journal-table-body">
                    </tbody>
            </table>
        </div>

        <div class="stats-section">
            <h2>Statistiques Globales</h2>
            <p>Taux de réussite global : <span id="global-win-rate">0.00%</span></p>
            <p>Total Trades : <span id="total-trades">0</span></p>
            <p>TP : <span id="total-tp">0</span> | SL : <span id="total-sl">0</span> | BE : <span id="total-be">0</span></p>

            <h3>Statistiques par Scénario</h3>
            <table>
                <thead>
                    <tr>
                        <th>Scénario</th>
                        <th>Trades</th>
                        <th>TP</th>
                        <th>SL</th>
                        <th>BE</th>
                        <th>Win Rate</th>
                    </tr>
                </thead>
                <tbody id="stats-table-body">
                    </tbody>
            </table>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>